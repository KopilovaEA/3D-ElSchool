{"version":3,"file":"js/487.5486a878.js","mappings":"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","sources":["webpack://3dcourses/./src/views/AdminView.vue","webpack://3dcourses/./src/views/AdminView.vue?e347"],"sourcesContent":["<template>\n  <div class=\"admin_panel\">\n    <h2>Дать доступ:</h2>\n    <form class=\"admin_panel__access_form\" @submit.prevent=\"onSubmit\">\n      <input type=\"email\" v-model.trim=\"email\" placeholder=\"email\" required />\n      <select v-model=\"selected_course\" required>\n        <option disabled value=\"\">Выберите один из курсов</option>\n        <option v-for=\"el in courses\" :key=\"el.id\" :value=\"el.id\">\n          {{ el.title }}\n        </option>\n      </select>\n      <button type=\"submit\">Добавить</button>\n      <h3 v-if=\"error\" style=\"color: red; margin: 6px auto\">{{ error }}</h3>\n      <h3 v-if=\"success\" style=\"color: green; margin: 6px auto\">\n        {{ success }}\n      </h3>\n    </form>\n    <h2>Пользователи:</h2>\n    <div class=\"admin_panel__search\">\n      <span>Поиск:</span>\n      <input v-model=\"search\" placeholder=\"email\" type=\"text\" />\n    </div>\n    <table class=\"admin_panel__table\">\n      <thead>\n        <tr>\n          <th style=\"width: 30px\">ID</th>\n          <th style=\"width: 90px\">Имя</th>\n          <th style=\"min-width: 90px\">Почта</th>\n          <th style=\"min-width: 90px\">Курсы</th>\n          <th style=\"width: 20px\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(user, index) in filtered_users\" :key=\"index\">\n          <td>{{ user.id }}</td>\n          <td>{{ user.name }}</td>\n          <td>{{ user.email }}</td>\n          <td>{{ user.title }}</td>\n          <td\n            style=\"color: red; cursor: pointer\"\n            @click=\"deleteAccess(user.id, user.title)\"\n          >\n            x\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { API } from \"@/http/index.js\";\nexport default {\n  data: () => ({\n    users: null,\n    filtered_users: null,\n    search: \"\",\n    email: \"\",\n    selected_course: \"\",\n    courses: null,\n    error: \"\",\n    success: \"\",\n  }),\n  watch: {\n    search() {\n      if (this.search.length !== 0) {\n        this.filtered_users = this.users.filter((user) =>\n          user.email.includes(this.search)\n        );\n      } else {\n        this.filtered_users = this.users;\n      }\n    },\n  },\n  methods: {\n    async deleteAccess(user_id, course_title) {\n      const answer = confirm(\n        `Вы уверены, что хотите удалить курс \"${course_title}\" у пользователя с ID=${user_id}?`\n      );\n      if (answer) {\n        try {\n          const response = await axios.post(API + \"/remove_access\", {\n            user_id,\n            course_title,\n          });\n          console.log(response.data);\n          await this.fetchUsers();\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    },\n    async onSubmit() {\n      console.log(\"@Submit\", this.email, this.selected_course);\n      try {\n        const response = await axios.post(API + \"/add_course_access\", {\n          email: this.email,\n          course_id: this.selected_course,\n        });\n        console.log(response.data);\n        this.success = \"Успешно добавлено\";\n        setTimeout(() => {\n          this.success = \"\";\n        }, 5000);\n        await this.fetchUsers();\n      } catch (e) {\n        console.log(e);\n        this.error = e.response.data.message\n          ? e.response.data.message\n          : e.message;\n        setTimeout(() => {\n          this.error = \"\";\n        }, 5000);\n      }\n    },\n    async fetchCourses() {\n      try {\n        const response = await axios.get(API + \"/courses\");\n        console.log(response.data);\n        this.courses = response.data;\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    async fetchUsers() {\n      try {\n        const response = await axios.post(API + \"/all_users\", {\n          id: this.$store.state.id,\n        });\n        console.log(response.data);\n        this.users = response.data;\n        this.filtered_users = this.users;\n      } catch (e) {\n        console.log(e);\n      }\n    },\n  },\n  async mounted() {\n    await this.fetchUsers();\n    await this.fetchCourses();\n  },\n};\n</script>\n\n<style scoped>\n.admin_panel {\n  min-height: calc(100vh - 50px);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.admin_panel__search {\n  margin-bottom: 20px;\n  display: flex;\n  gap: 10px;\n}\n.admin_panel__search > span {\n  display: flex;\n  align-items: center;\n}\n.admin_panel__search > input,\n.admin_panel__access_form > input {\n  border-radius: 5px;\n  background: #788fb35e;\n  border: none;\n  font-size: 18px;\n  padding: 5px 10px;\n}\n.admin_panel__access_form {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n  margin-bottom: 20px;\n}\n.admin_panel__access_form > select {\n  border-radius: 5px;\n  background: #788fb35e;\n  border: none;\n  font-size: 18px;\n  padding: 5px 10px;\n}\n\n.admin_panel__access_form > button {\n  width: 120px;\n  height: 30.8px;\n  border-radius: 5px;\n  border: none;\n  background: #0074a67a;\n  font-size: 18px;\n  font-weight: bold;\n  cursor: pointer;\n}\n.admin_panel__access_form > button:hover {\n  transition: all 0.3s ease;\n  transform: scale(1.1);\n}\n\n.admin_panel__table {\n  border: 1px solid #ffeded;\n  table-layout: fixed;\n  width: 90%;\n  padding-bottom: 20px;\n}\n.admin_panel__table th {\n  font-weight: bold;\n  padding: 5px;\n  background: #fff6dd;\n  border: 1px solid #dddddd;\n  overflow: hidden;\n}\n.admin_panel__table td {\n  padding: 5px 10px;\n  border: 1px solid #eee;\n  text-align: left;\n  overflow: hidden;\n}\n.admin_panel__table tbody tr:nth-child(odd) {\n  background: #e3e6ff;\n}\n.admin_panel__table tbody tr:nth-child(even) {\n  background: #d2d7ff;\n}\n</style>\n","import { render } from \"./AdminView.vue?vue&type=template&id=b638480c&scoped=true\"\nimport script from \"./AdminView.vue?vue&type=script&lang=js\"\nexport * from \"./AdminView.vue?vue&type=script&lang=js\"\n\nimport \"./AdminView.vue?vue&type=style&index=0&id=b638480c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Acer\\\\OneDrive\\\\Рабочий стол\\\\Новая папка\\\\Курсовая\\\\mysite\\\\3DElSchool\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b638480c\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","disabled","value","type","style","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","$options","_ctx","placeholder","required","_hoisted_3","_Fragment","el","key","id","title","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","user","index","name","email","onClick","data","users","filtered_users","search","selected_course","courses","error","success","watch","this","length","filter","includes","methods","async","user_id","course_title","answer","confirm","response","axios","API","console","log","fetchUsers","e","course_id","setTimeout","message","$store","state","fetchCourses","__exports__","render"],"sourceRoot":""}