"use strict";(self["webpackChunk_3dcourses"]=self["webpackChunk_3dcourses"]||[]).push([[692],{7998:function(r,o,s){s.r(o),s.d(o,{default:function(){return m}});var i=s(3396),t=s(7139),a=s(9242);const e={class:"login"},n={class:"login-form"},l={key:0,class:"form-error"},h={class:"login-form-btns"};function d(r,o,s,d,w,g){return(0,i.wg)(),(0,i.iD)("div",e,[(0,i._)("div",n,[(0,i.wy)((0,i._)("input",{class:(0,t.C_)({login_error:r.isLoginError}),placeholder:"Почта",type:"text","onUpdate:modelValue":o[0]||(o[0]=o=>r.login=o)},null,2),[[a.nr,r.login,void 0,{trim:!0}]]),(0,i.wy)((0,i._)("input",{class:(0,t.C_)({password_error:r.isPasswordError}),placeholder:"Пароль",type:"password","onUpdate:modelValue":o[1]||(o[1]=o=>r.password=o)},null,2),[[a.nr,r.password,void 0,{trim:!0}]]),r.error?((0,i.wg)(),(0,i.iD)("h3",l,(0,t.zw)(r.error),1)):(0,i.kq)("",!0),(0,i._)("div",h,[(0,i._)("button",{class:"login-btn",onClick:o[2]||(o[2]=r=>g.goToLogin())},"Войти"),(0,i._)("div",{class:"registration-btn",onClick:o[3]||(o[3]=r=>g.goToRegistration())}," Ещё нет профиля? Зарегистрируйтесь ")])])])}s(7658);var w=s(4161),g=s(9028),c={data:()=>({login:"",password:"",isLoginError:!1,isPasswordError:!1,error:""}),methods:{loginValidate(){const r=/^(\w+|\w+(.|_)*\w+)@\w+\.[A-Za-z]+$/;if(!this.login&&!this.password)throw this.isLoginError=!0,this.isPasswordError=!0,this.error="Пожалуйста, введите почту и пароль",new Error("Пожалуйста, введите почту и пароль");if(!this.login)throw this.isLoginError=!0,this.error="Пожалуйста, введите почту",new Error("Пожалуйста, введите почту");if(!this.password)throw this.isLoginError=!0,this.error="Пожалуйста, введите пароль",new Error("Пожалуйста, введите пароль");if(!r.test(this.login))throw this.isLoginError=!0,this.error="Почта введена некорректно",new Error("Почта введена некорректно");if(this.password.length<6)throw this.isPasswordError=!0,this.error="Пароль не может быть меньше 6-ти символов",new Error("Пароль не может быть меньше 6-ти символов")},async goToLogin(){this.isLoginError=!1,this.isPasswordError=!1,this.error="";try{this.loginValidate()}catch(r){throw new Error("Проверка не пройдена")}try{const r=await w.Z.post(g.b+"/login",{email:this.login,password:this.password});console.log(r.data),"Ошибка"===r.data?.message?(this.isLoginError=!0,this.isPasswordError=!0,this.error="Пользователя с такими данными не найдено"):(this.$store.commit("setId",r.data.id),this.$store.commit("setName",r.data.name),this.$store.commit("setEmail",r.data.email),window.localStorage.setItem("auth",r.data.id),this.$router.push("/"))}catch(r){console.log(r)}},goToRegistration(){this.$router.push("registration")}}},p=s(89);const u=(0,p.Z)(c,[["render",d],["__scopeId","data-v-56c84b22"]]);var m=u}}]);
//# sourceMappingURL=692.2e4a8ade.js.map